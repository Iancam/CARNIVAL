---
title: "CARNIVAL"
author: "Panuwat Trairatphisan"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# CARNIVAL pipeline

## Pre-requisite
- CARNIVAL requires IBM ILOG CPLEX to be pre-installed
- The path to Cplex needs to be specified in "InputFile_CARNIVAL.txt"
- For Mac OS: the path is usually "~/Applications/IBM/ILOG/CPLEX_Studio1271/cplex/bin/x86-64_osx" where the version of CPLEX (CPLEX_Studio1271) has to be changed accordingly
- For Windows: --- to be tested ---
- For Linux: --- to be tested ---

## Preparation
- Details regarding the path to input files for CARNIVAL and CARNIVAL optimisation/plotting optins needs to be specified in the file "InputFile_CARNIVAL.txt" in the working directory
- The provided template of "InputFile_CARNIVAL.txt" can be retrieved by the following command:

```{r, message=T, warning=T}
# rm(list=ls());cat("\014")
library(CARNIVAL)
# library(devtools);load_all()
file.copy(from=system.file("InputFile_CARNIVAL.txt",package="CARNIVAL"),to=getwd(),overwrite=TRUE)
```

## The CARNIVAL pipeline consists of 3 main steps
1. Read-in information from the file "InputFile_CARNIVAL.txt" and write linear programming (LP) constraints to a file (testFile.lp)
2. CPLEX optimisation
3. Read-in XML result file from CPLEX and generate a summary of results and figures

- All 3 steps were wrapped into a single function called "runCARNIVAL.R" and can directly be run once the input file (default: "InputFile_CARNIVAL.txt") is in the working directory

- Note: Multiple temporary files will be generated during the optimisation but they will be automatically clean-up after the optimisation. Please do not remove these intermediate files manually.

```{r, message=FALSE, warning=FALSE}
runCARNIVAL(InputFile="InputFile_CARNIVAL.txt")
```

- The results are saved in the result folder on the working directory
